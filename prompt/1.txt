- HomePage.jsp:
<%@page import="Modal.TaiKhoan.TaiKhoan"%>
<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.ArrayList" %>
<%@ page import="Modal.BaiViet.BaiViet" %>
<%@ page import="Modal.TheLoai.TheLoai" %>
<%@ page import="Modal.BinhLuan.BinhLuan" %>
<%@ page import="java.text.SimpleDateFormat" %>
<!DOCTYPE html>
<html lang="vi">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Website Forum</title>
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
	<link rel="stylesheet" href="${pageContext.request.contextPath}/pages/home_page/style.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</head>
<body>
	<%
		String quyen = (String) session.getAttribute("quyen");
		String account = (String) session.getAttribute("account");
		boolean isAdmin = "Admin".equals(quyen);
		
		ArrayList<TheLoai> dsTheLoai = (ArrayList<TheLoai>) request.getAttribute("dsTheLoai");
		ArrayList<BaiViet> dsBaiViet = (ArrayList<BaiViet>) request.getAttribute("dsBaiViet");
		int selectedTheLoai = -1;
		String selectedTenTheLoai = "";
		if(request.getAttribute("selectedTheLoai") != null) selectedTheLoai = (int) request.getAttribute("selectedTheLoai");
		for(TheLoai tl: dsTheLoai) {
			if(tl.getMaTheLoai() == selectedTheLoai) {
				selectedTenTheLoai = tl.getTenTheLoai();
				break;
			}
		}
		String sortBy = (String) request.getAttribute("sortBy");
		String searchKey = (String) request.getAttribute("searchKey");
		
		SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy HH:mm");
		
		Integer currentPage = (Integer) request.getAttribute("currentPage");
		Integer totalPages = (Integer) request.getAttribute("totalPages");
		Integer totalItems = (Integer) request.getAttribute("totalItems");
		Integer startIndex = (Integer) request.getAttribute("startIndex");
		
		if(currentPage == null) currentPage = 1;
		if(totalPages == null) totalPages = 0;
		if(totalItems == null) totalItems = 0;
		if(startIndex == null) startIndex = 0;
	%>

	<!-- Navbar -->
	<nav class="navbar navbar-expand-lg navbar-dark bg-gradient sticky-top">
		<div class="container-fluid">
			<!-- Logo -->
			<a class="navbar-brand d-none d-lg-flex align-items-center" href="${pageContext.request.contextPath}/TrangChuController">
				<i class="bi bi-chat-dots-fill me-2"></i>
				<span class="fw-bold">Forum</span>
			</a>

			<!-- Mobile Toggle -->
			<button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarContent">
				<span class="navbar-toggler-icon"></span>
			</button>

			<!-- Nav Links -->
			<div class="collapse navbar-collapse" id="navbarContent">
				<ul class="navbar-nav me-auto">
					<li class="nav-item">
						<a class="nav-link active" href="${pageContext.request.contextPath}/TrangChuController">
							<i class="bi bi-house-fill me-1"></i> Trang chủ
						</a>
					</li>
					<% if(isAdmin) { %>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/TaiKhoanController">
							<i class="bi bi-tags-fill me-1"></i>Tài khoản
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/TheLoaiController">
							<i class="bi bi-tags-fill me-1"></i>Thể loại
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/BaiVietController">
							<i class="bi bi-file-text-fill me-1"></i>Bài viết
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/BinhLuanController">
							<i class="bi bi-chat-left-text-fill me-1"></i>Bình luận
						</a>
					</li>
					<% } %>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/BaiVietCuaToiController">
							<i class="bi bi-journal-text me-1"></i>Bài viết của tôi
						</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="${pageContext.request.contextPath}/BinhLuanCuaToiController">
							<i class="bi bi-chat-square-dots me-1"></i>Bình luận của tôi
						</a>
					</li>
				</ul>

				<!-- User Menu -->
				<div class="dropdown">
					<button class="btn btn-user dropdown-toggle" type="button" data-bs-toggle="dropdown">
						<i class="bi bi-person-circle"></i>
						<span class="ms-2 d-none d-lg-inline"><%= account %></span>
					</button>
					<ul class="dropdown-menu dropdown-menu-end">
						<li><a class="dropdown-item" href="${pageContext.request.contextPath}/ThongTinCaNhanController">
							<i class="bi bi-person-fill me-2"></i>Thông tin cá nhân
						</a></li>
						<li><hr class="dropdown-divider"></li>
						<li><a class="dropdown-item text-danger" href="${pageContext.request.contextPath}/DangXuatController">
							<i class="bi bi-box-arrow-right me-2"></i>Đăng xuất
						</a></li>
					</ul>
				</div>
			</div>
		</div>
	</nav>

	<!-- Main Content -->
	<div class="container-fluid mt-4">
		<div class="row g-3">
			<!-- Left Sidebar - Categories -->
			<div class="col-lg-3 col-md-4 d-none d-md-block">
				<div class="card shadow-sm category-card">
					<div class="card-header bg-gradient text-white">
						<h5 class="mb-0"><i class="bi bi-tags-fill me-2"></i>Thể loại</h5>
					</div>
					<div class="card-body p-0">
						<div class="list-group list-group-flush category-list">
							<a href="${pageContext.request.contextPath}/TrangChuController" 
							   class="list-group-item list-group-item-action <%= request.getAttribute("selectedTheLoai") == null ? "active" : "" %>">
								<i class="bi bi-grid-fill me-2"></i>Tất cả
							</a>
							<% if(dsTheLoai != null && !dsTheLoai.isEmpty()) {
								for(TheLoai tl : dsTheLoai) { %>
									<a href="${pageContext.request.contextPath}/TrangChuController?theloai=<%= tl.getMaTheLoai() %>" 
									   class="list-group-item list-group-item-action <%= tl.getMaTheLoai() == (selectedTheLoai) ? "active" : "" %>">
										<i class="bi bi-tag-fill me-2"></i><%= tl.getTenTheLoai() %>
									</a>
							<% }
							} %>
						</div>
					</div>
				</div>
			</div>

			<!-- Center Content - Posts -->
			<div class="col-lg-6 col-md-8 col-12">
				<!-- Mobile Category Selector -->
				<div class="card shadow-sm mb-3 d-md-none">
					<div class="card-body">
						<select class="form-select" id="mobileCategorySelect" onchange="window.location.href=this.value">
							<option value="${pageContext.request.contextPath}/TrangChuController" <%= request.getAttribute("selectedTheLoai") == null ? "selected" : "" %>>
								Tất cả thể loại
							</option>
							<% if(dsTheLoai != null && !dsTheLoai.isEmpty()) {
								for(TheLoai tl : dsTheLoai) { %>
									<option value="${pageContext.request.contextPath}/TrangChuController?theloai=<%= tl.getMaTheLoai() %>" 
											<%= tl.getMaTheLoai() == (selectedTheLoai) ? "selected" : "" %>>
										<%= tl.getTenTheLoai() %>
									</option>
							<% }
							} %>
						</select>
					</div>
				</div>

				<!-- Sort & Filter Controls -->
				<div class="card shadow-sm mb-3 controls-card">
					<div class="card-body">
						<div class="row g-2">
							<div class="col-md-6">
								<label class="form-label small fw-bold">Sắp xếp:</label>
								<select class="form-select form-select-sm" id="sortSelect" onchange="handleSort(this.value)">
									<option value="">-- Chọn --</option>
									<option value="danhGiaCao" <%= "danhGiaCao".equals(sortBy) ? "selected" : "" %>>Đánh giá cao nhất</option>
									<option value="danhGiaThap" <%= "danhGiaThap".equals(sortBy) ? "selected" : "" %>>Đánh giá thấp nhất</option>
									<option value="taoGanNhat" <%= "taoGanNhat".equals(sortBy) ? "selected" : "" %>>Tạo gần nhất</option>
									<option value="taoXaNhat" <%= "taoXaNhat".equals(sortBy) ? "selected" : "" %>>Tạo xa nhất</option>
									<option value="capNhatGanNhat" <%= "capNhatGanNhat".equals(sortBy) ? "selected" : "" %>>Cập nhật gần nhất</option>
									<option value="capNhatXaNhat" <%= "capNhatXaNhat".equals(sortBy) ? "selected" : "" %>>Cập nhật xa nhất</option>
								</select>
							</div>
							<div class="col-md-6">
								<label class="form-label small fw-bold">Lọc theo tác giả:</label>
								<select class="form-select form-select-sm" id="filterTaiKhoanSelect" onchange="handleFilterTaiKhoan(this.value)">
									<option value="">-- Tất cả tác giả --</option>
									<% 
										ArrayList<TaiKhoan> dsTaiKhoan = (ArrayList<TaiKhoan>) request.getAttribute("dsTaiKhoan");
										String filterTaiKhoan = (String) request.getAttribute("filterTaiKhoan");
										if(dsTaiKhoan != null && !dsTaiKhoan.isEmpty()) {
											for(TaiKhoan tk : dsTaiKhoan) { 
									%>
										<option value="<%= tk.getTenDangNhap() %>" <%= tk.getTenDangNhap().equals(filterTaiKhoan) ? "selected" : "" %>>
											<%= tk.getTenDangNhap() %>
										</option>
									<% 
											}
										}
									%>
								</select>
							</div>
						</div>
					</div>
				</div>

				<!-- Posts List -->
				<div class="posts-container">
					<% if(dsBaiViet == null || dsBaiViet.isEmpty()) { %>
						<div class="card shadow-sm">
							<div class="card-body text-center py-5">
								<i class="bi bi-inbox text-muted" style="font-size: 4rem;"></i>
								<h5 class="mt-3 text-muted">
									<% if(request.getAttribute("selectedTheLoai") != null) { %>
										Chưa có bài viết nào thỏa điều kiện thể loại "<%= selectedTenTheLoai %>"
									<% } else if(searchKey != null && !searchKey.trim().isEmpty()) { %>
										Chưa có bài viết nào thỏa điều kiện tìm kiếm
									<% } else { %>
										Chưa có bài viết nào.
									<% } %>
								</h5>
							</div>
						</div>
					<% } else {
						for(BaiViet bv : dsBaiViet) {
							// Tìm tên thể loại
							String tenTheLoai = "";
							if(dsTheLoai != null) {
								for(TheLoai tl : dsTheLoai) {
									if(tl.getMaTheLoai() == bv.getMaTheLoai()) {
										tenTheLoai = tl.getTenTheLoai();
										break;
									}
								}
							}
							
							// Lấy số bình luận
							ArrayList<BinhLuan> dsBinhLuan = (ArrayList<BinhLuan>) request.getAttribute("dsBinhLuan_" + bv.getMaBaiViet());
							int soBinhLuan = (dsBinhLuan != null) ? dsBinhLuan.size() : 0;
					%>
						<div class="card shadow-sm mb-3 post-card" onclick="window.location.href='${pageContext.request.contextPath}/ChiTietBaiVietController?id=<%= bv.getMaBaiViet() %>'">
							<div class="card-body">
								<!-- User Info -->
								<div class="d-flex align-items-center mb-2">
									<i class="bi bi-person-circle post-avatar"></i>
									<div class="ms-2">
										<div class="fw-bold"><%= bv.getTaiKhoanTao() %></div>
										<small class="text-muted">
											<i class="bi bi-clock me-1"></i>
											<%= bv.getThoiDiemCapNhat() != null ? sdf.format(bv.getThoiDiemCapNhat()) : sdf.format(bv.getThoiDiemTao()) %>
										</small>
									</div>
								</div>

								<!-- Category Badge -->
								<div class="mb-2">
									<span class="badge bg-primary"><i class="bi bi-tag me-1"></i><%= tenTheLoai %></span>
								</div>

								<!-- Post Content -->
								<h5 class="post-title"><%= bv.getTieuDe() %></h5>
								<p class="post-content"><%= bv.getNoiDung().length() > 200 ? bv.getNoiDung().substring(0, 200) + "..." : bv.getNoiDung() %></p>

								<!-- Media -->
								<% if(bv.getUrl() != null && !bv.getUrl().trim().isEmpty()) { %>
									<div class="post-media mb-3">
										<% if(bv.getUrl().matches(".*\\.(jpg|jpeg|png|gif|webp)$")) { %>
											<img src="<%= bv.getUrl() %>" class="img-fluid rounded" alt="Post image">
										<% } else if(bv.getUrl().matches(".*\\.(mp4|webm|ogg)$")) { %>
											<video controls class="w-100 rounded">
												<source src="<%= bv.getUrl() %>" type="video/mp4">
											</video>
										<% } %>
									</div>
								<% } %>

								<!-- Post Stats -->
								<div class="d-flex justify-content-between align-items-center pt-2 border-top">
									<div class="text-muted">
										<i class="bi bi-chat-fill me-1"></i>
										<span><%= soBinhLuan %> bình luận</span>
									</div>
									<div class="rating-display">
										<% 
											double danhGia = (bv.getDanhGia() != null) ? bv.getDanhGia().doubleValue() : 0;
											for(int i = 1; i <= 5; i++) {
												if(i <= danhGia) { %>
													<i class="bi bi-star-fill text-warning"></i>
										<%		} else { %>
													<i class="bi bi-star text-warning"></i>
										<%		}
											}
										%>
										<span class="ms-1 text-muted"><%= String.format("%.1f", danhGia) %></span>
									</div>
								</div>
							</div>
						</div>
					<% }
					} %>
					
					<% if(totalPages > 1) { %>
						<nav aria-label="Page navigation" class="mt-4">
							<ul class="pagination justify-content-center">
								<li class="page-item <%= currentPage == 1 ? "disabled" : "" %>">
									<a class="page-link" href="<%= currentPage > 1 ? buildPaginationUrl(request, currentPage - 1) : "#" %>" aria-label="Previous">
										<span aria-hidden="true">&laquo;</span>
									</a>
								</li>
								
								<%
									int startPage = Math.max(1, currentPage - 2);
									int endPage = Math.min(totalPages, currentPage + 2);
									
									if(currentPage <= 3) {
										endPage = Math.min(5, totalPages);
									}
									
									if(currentPage >= totalPages - 2) {
										startPage = Math.max(1, totalPages - 4);
									}
									
									if(startPage > 1) {
								%>
										<li class="page-item">
											<a class="page-link" href="<%= buildPaginationUrl(request, 1) %>">1</a>
										</li>
										<% if(startPage > 2) { %>
											<li class="page-item disabled">
												<span class="page-link">...</span>
											</li>
										<% } %>
								<%
									}
									
									for(int i = startPage; i <= endPage; i++) {
								%>
										<li class="page-item <%= i == currentPage ? "active" : "" %>">
											<a class="page-link" href="<%= buildPaginationUrl(request, i) %>"><%= i %></a>
										</li>
								<%
									}
									
									if(endPage < totalPages) {
										if(endPage < totalPages - 1) {
								%>
											<li class="page-item disabled">
												<span class="page-link">...</span>
											</li>
								<%
										}
								%>
										<li class="page-item">
											<a class="page-link" href="<%= buildPaginationUrl(request, totalPages) %>"><%= totalPages %></a>
										</li>
								<%
									}
								%>
								
								<li class="page-item <%= currentPage == totalPages ? "disabled" : "" %>">
									<a class="page-link" href="<%= currentPage < totalPages ? buildPaginationUrl(request, currentPage + 1) : "#" %>" aria-label="Next">
										<span aria-hidden="true">&raquo;</span>
									</a>
								</li>
							</ul>
						</nav>
						
						<div class="text-center text-muted mt-2">
							<small>
								Trang <%= currentPage %> / <%= totalPages %> 
								(Tổng <%= totalItems %> bài viết)
							</small>
						</div>
					<% } %>
				</div>
			</div>

			<!-- Right Sidebar - Search -->
			<div class="col-lg-3 d-none d-lg-block">
				<div class="card shadow-sm search-card sticky-top" style="top: 80px;">
					<div class="card-header bg-gradient text-white">
						<h5 class="mb-0"><i class="bi bi-search me-2"></i>Tìm kiếm</h5>
					</div>
					<div class="card-body">
					    <form action="${pageContext.request.contextPath}/TrangChuController" method="get">
					        <div class="input-group search-box">
					            <input type="text" class="form-control" id="searchInput" name="search"
					                   placeholder="Tìm kiếm bài viết..."
					                   value="<%= searchKey != null ? searchKey : "" %>">
					            <button class="btn btn-primary" type="submit">
					                <i class="bi bi-search"></i>
					            </button>
					            <button type="button" class="btn btn-ai-search" onclick="enhanceSearch()" title="Tìm kiếm thông minh với AI">
					                <i class="bi bi-stars"></i>
					            </button>
					        </div>
					    </form>
					</div>
				</div>
			</div>
		</div>
	</div>

	<!-- Footer -->
	<footer class="footer mt-5">
		<div class="container text-center">
			<p class="mb-0">&copy; 2025 Website Forum. All rights reserved.</p>
		</div>
	</footer>
	
	<%!
		private String buildPaginationUrl(HttpServletRequest request, int page) {
			String contextPath = request.getContextPath();
			String theloai = request.getParameter("theloai");
			String sort = request.getParameter("sort");
			String search = request.getParameter("search");
			String filterTK = request.getParameter("filterTK");
			
			StringBuilder url = new StringBuilder(contextPath + "/TrangChuController?page=" + page);
			
			if(theloai != null && !theloai.trim().isEmpty()) {
				try {
					url.append("&theloai=").append(java.net.URLEncoder.encode(theloai, "UTF-8"));
				} catch(Exception e) {
					e.printStackTrace();
				}
			}
			if(sort != null && !sort.trim().isEmpty()) {
				try {
					url.append("&sort=").append(java.net.URLEncoder.encode(sort, "UTF-8"));
				} catch(Exception e) {
					e.printStackTrace();
				}
			}
			if(search != null && !search.trim().isEmpty()) {
				try {
					url.append("&search=").append(java.net.URLEncoder.encode(search, "UTF-8"));
				} catch(Exception e) {
					e.printStackTrace();
				}
			}
			if(filterTK != null && !filterTK.trim().isEmpty()) {
				try {
					url.append("&filterTK=").append(java.net.URLEncoder.encode(filterTK, "UTF-8"));
				} catch(Exception e) {
					e.printStackTrace();
				}
			}
			
			return url.toString();
		}
	%>

	<script src="${pageContext.request.contextPath}/pages/home_page/script.js"></script>
</body>
</html>
- style.css (Của HomePage):
/* style.css (Của HomePage) - Full Code with Pagination Styles */
@charset "UTF-8";

/* =======================
   Global Styles
======================= */
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
    transition: background-color 0.2s ease, border-color 0.2s ease, color 0.2s ease;
}

body {
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif !important;
    background-color: #f0f2f5 !important;
    min-height: 100vh !important;
}

/* =======================
   Navbar Styles
======================= */
.bg-gradient {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
}

.navbar {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
}

.navbar-brand {
    font-size: 1.5rem !important;
    transition: transform 0.3s ease !important;
}

.navbar-brand:hover {
    transform: scale(1.05) !important;
}

.navbar-brand i {
    font-size: 1.8rem !important;
}

.nav-link {
    border-radius: 8px !important;
    margin: 0 4px !important;
    transition: all 0.3s ease !important;
    color: #fff !important;
}

.nav-link:hover {
    background-color: rgba(255, 255, 255, 0.1) !important;
    transform: translateY(-2px) !important;
}

.nav-link.active {
    background-color: rgba(255, 255, 255, 0.25) !important;
    font-weight: 600 !important;
}

/* Nút người dùng */
.btn-user {
    background-color: rgba(255, 255, 255, 0.2) !important;
    border: none !important;
    color: #fff !important;
    border-radius: 25px !important;
    padding: 8px 16px !important;
    transition: all 0.3s ease !important;
}

.btn-user:hover {
    background-color: rgba(255, 255, 255, 0.35) !important;
    transform: translateY(-2px) !important;
}

.btn-user i {
    font-size: 1.5rem !important;
}

/* =======================
   Card Styles
======================= */
.card {
    border: none !important;
    border-radius: 12px !important;
    transition: transform 0.3s ease, box-shadow 0.3s ease !important;
}

.card:hover {
    transform: translateY(-2px) !important;
    box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15) !important;
}

.card-header {
    border-radius: 12px 12px 0 0 !important;
    border: none !important;
}

/* =======================
   Category Sidebar
======================= */
.category-card {
    position: sticky !important;
    top: 80px !important;
}

.category-list {
    max-height: calc(100vh - 200px) !important;
    overflow-y: auto !important;
}

/* Custom Scrollbar */
.category-list::-webkit-scrollbar {
    width: 6px !important;
}
.category-list::-webkit-scrollbar-track {
    background: #f1f1f1 !important;
}
.category-list::-webkit-scrollbar-thumb {
    background: #888 !important;
    border-radius: 3px !important;
}
.category-list::-webkit-scrollbar-thumb:hover {
    background: #555 !important;
}

.list-group-item {
    border: none !important;
    border-left: 3px solid transparent !important;
    transition: all 0.3s ease !important;
}

.list-group-item:hover {
    background-color: #f8f9fa !important;
    border-left-color: #667eea !important;
    padding-left: 1.5rem !important;
}

.list-group-item.active {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border-left-color: #764ba2 !important;
    color: #fff !important;
    font-weight: 600 !important;
    box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.2) !important;
}

/* =======================
   Controls Card
======================= */
.controls-card {
    background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%) !important;
}

/* =======================
   Post Card
======================= */
.post-card {
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    animation: fadeInUp 0.5s ease !important;
}

.post-card:hover {
    transform: translateY(-4px) !important;
    box-shadow: 0 12px 24px rgba(0, 0, 0, 0.2) !important;
}

@keyframes fadeInUp {
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

.post-avatar {
    font-size: 2.5rem !important;
    color: #667eea !important;
}

.post-title {
    font-size: 1.25rem !important;
    font-weight: 700 !important;
    color: #2d3748 !important;
    margin-bottom: 0.5rem !important;
}

.post-content {
    color: #4a5568 !important;
    line-height: 1.6 !important;
    margin-bottom: 1rem !important;
}

.post-media img,
.post-media video {
    max-height: 400px !important;
    object-fit: cover !important;
    border-radius: 8px !important;
}

.rating-display i {
    font-size: 1.1rem !important;
}

/* =======================
   Search Card
======================= */
.search-card {
    z-index: 1000 !important;
}

.search-card .input-group {
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
    border-radius: 8px !important;
    overflow: hidden !important;
}

.search-card .form-control {
    border: none !important;
    padding: 12px 16px !important;
}

.search-card .form-control:focus {
    box-shadow: none !important;
}

.search-card .btn-primary {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border: none !important;
    padding: 12px 20px !important;
}

.search-card .btn-primary:hover {
    opacity: 0.9 !important;
}

/* =======================
   Footer
======================= */
.footer {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    padding: 20px 0 !important;
    margin-top: auto !important;
}

/* =======================
   Modal
======================= */
.modal-content {
    border-radius: 16px !important;
    border: none !important;
}

.modal-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border-radius: 16px 16px 0 0 !important;
}

.modal-header .btn-close {
    filter: brightness(0) invert(1) !important;
}

#postDetailContent .divider {
    height: 2px !important;
    background: linear-gradient(90deg, transparent, #667eea, transparent) !important;
    margin: 2rem 0 !important;
}

/* =======================
   Comment
======================= */
.comment-card {
    background-color: #f8f9fa !important;
    border-radius: 12px !important;
    padding: 1rem !important;
    margin-bottom: 1rem !important;
    transition: all 0.3s ease !important;
}

.comment-card:hover {
    background-color: #e9ecef !important;
    transform: translateX(5px) !important;
}

.comment-avatar {
    font-size: 2rem !important;
    color: #764ba2 !important;
}

/* =======================
   Badge
======================= */
.badge {
    padding: 6px 12px !important;
    border-radius: 20px !important;
    font-weight: 500 !important;
}

/* =======================
   Pagination Styles
======================= */
.pagination {
    margin-bottom: 0 !important;
}

.page-link {
    color: #667eea !important;
    border: 1px solid #e2e8f0 !important;
    padding: 8px 16px !important;
    margin: 0 4px !important;
    border-radius: 8px !important;
    transition: all 0.3s ease !important;
    font-weight: 500 !important;
}

.page-link:hover {
    background-color: #f8f9fa !important;
    border-color: #667eea !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 2px 8px rgba(102, 126, 234, 0.3) !important;
}

.page-item.active .page-link {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    border-color: #667eea !important;
    color: white !important;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4) !important;
}

.page-item.disabled .page-link {
    color: #cbd5e0 !important;
    background-color: #f8f9fa !important;
    border-color: #e2e8f0 !important;
    cursor: not-allowed !important;
}

.page-item:first-child .page-link {
    border-radius: 8px !important;
}

.page-item:last-child .page-link {
    border-radius: 8px !important;
}

/* =======================
   Responsive
======================= */
@media (max-width: 991px) {
    .category-card {
        position: static !important;
    }
    .search-card {
        position: static !important;
    }
}

@media (max-width: 767px) {
    .navbar-brand {
        font-size: 1.2rem !important;
    }
    .post-card {
        margin-bottom: 1rem !important;
    }
    .post-title {
        font-size: 1.1rem !important;
    }
    .post-content {
        font-size: 0.9rem !important;
    }
}

@media (max-width: 576px) {
    .card-body {
        padding: 1rem !important;
    }
    .navbar-brand i {
        font-size: 1.5rem !important;
    }
    .btn-user i {
        font-size: 1.3rem !important;
    }
    .post-avatar {
        font-size: 2rem !important;
    }
    .modal-dialog {
        margin: 0.5rem !important;
    }
}

/* =======================
   Focused Inputs
======================= */
.form-select:focus,
.form-control:focus {
    border-color: #667eea !important;
    box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25) !important;
}

/* =======================
   Spinner & Empty State
======================= */
.spinner-border {
    width: 3rem !important;
    height: 3rem !important;
}

.bi-inbox {
    opacity: 0.3 !important;
}

/* =======================
   Dropdown
======================= */
.dropdown-menu {
    border: none !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15) !important;
    border-radius: 12px !important;
    margin-top: 0.5rem !important;
    z-index: 1050 !important;
}

.dropdown-item {
    padding: 10px 20px !important;
    transition: all 0.3s ease !important;
}

.dropdown-item:hover {
    background-color: #f8f9fa !important;
    padding-left: 25px !important;
}

.dropdown-item i {
    width: 20px !important;
}

/* =======================
   Scrollbar (Global)
======================= */
::-webkit-scrollbar {
    width: 8px !important;
    height: 8px !important;
}
::-webkit-scrollbar-track {
    background: #f1f1f1 !important;
}
::-webkit-scrollbar-thumb {
    background: #888 !important;
    border-radius: 4px !important;
}
::-webkit-scrollbar-thumb:hover {
    background: #555 !important;
}

/* AI Search Button - Đã chỉnh sửa để tách ra (không absolute nữa) */
.btn-ai-search {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%) !important;
    color: white !important;
    border: none !important;
    border-radius: 50% !important; /* Giữ hình tròn nếu muốn, hoặc thay bằng 8px để vuông */
    width: 36px !important;
    height: 36px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    transition: all 0.3s ease !important;
    z-index: 10 !important;
    /* Xóa position: absolute, right, top, transform để nút nằm bình thường */
}

.btn-ai-search:hover {
    transform: scale(1.05) !important;
    box-shadow: 0 4px 12px rgba(102, 126, 234, 0.5) !important;
}

.btn-ai-search i {
    font-size: 1rem !important;
}

.search-box {
    position: relative !important;
    align-items: center !important;
    justify-content: center !important;
}

.search-box .form-control {
    /* Xóa padding-right: 60px để input không bị đẩy chỗ */
}

.search-icon {
    position: absolute !important;
    left: 1rem !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    color: #667eea !important;
    font-size: 1.2rem !important;
    pointer-events: none !important;
}
- script.js (Của HomePage):
document.addEventListener('DOMContentLoaded', function() {
	
	// Initialize tooltips
	var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'));
	var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
		return new bootstrap.Tooltip(tooltipTriggerEl);
	});

});

// AI-Enhanced Search
async function enhanceSearch() {
    const searchInput = document.getElementById('searchInput');
    const query = searchInput.value.trim();
    
    if (!query) {
        alert('Vui lòng nhập từ khóa tìm kiếm!');
        return;
    }
    
    searchInput.disabled = true;
    const originalPlaceholder = searchInput.placeholder;
    searchInput.placeholder = 'Đang xử lý với AI...';
    
    try {
        const contextPath = window.location.pathname.split('/')[1];
        const response = await fetch('/' + contextPath + '/AISearchController', {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded',
            },
            body: 'query=' + encodeURIComponent(query) + '&context=binhluan'
        });
        
        const data = await response.json();
        
        if (data.success) {
            searchInput.value = data.enhancedQuery;
            const form = searchInput.closest('form');
            if (form) {
                setTimeout(() => form.submit(), 100);
            }
        } else {
            alert('Không thể xử lý với AI. Tìm kiếm thường...');
            searchInput.closest('form').submit();
        }
    } catch (error) {
        console.error('AI Search error:', error);
        searchInput.closest('form').submit();
    } finally {
        searchInput.disabled = false;
        searchInput.placeholder = originalPlaceholder;
    }
}

// Handle sort selection
function handleSort(value) {
	if(!value) return;
	
	const urlParams = new URLSearchParams(window.location.search);
	const contextPath = window.location.pathname.split('/')[1];
	const theloai = urlParams.get('theloai');
	const search = urlParams.get('search');
	const filterTK = urlParams.get('filterTK');
	const page = urlParams.get('page');
	
	let url = '/' + contextPath + '/TrangChuController?sort=' + value;
	if(theloai) url += '&theloai=' + encodeURIComponent(theloai);
	if(search) url += '&search=' + encodeURIComponent(search);
	if(filterTK) url += '&filterTK=' + encodeURIComponent(filterTK);
	if(page) url += '&page=' + encodeURIComponent(page);
	
	window.location.href = url;
}

// Handle filter by tai khoan
function handleFilterTaiKhoan(value) {
	const urlParams = new URLSearchParams(window.location.search);
	const contextPath = window.location.pathname.split('/')[1];
	const theloai = urlParams.get('theloai');
	const search = urlParams.get('search');
	const sort = urlParams.get('sort');
	const page = urlParams.get('page');
	
	let url = '/' + contextPath + '/TrangChuController';
	let params = [];
	
	if(theloai) params.push('theloai=' + encodeURIComponent(theloai));
	if(search) params.push('search=' + encodeURIComponent(search));
	if(sort) params.push('sort=' + sort);
	if(value) params.push('filterTK=' + encodeURIComponent(value));
	if(page) params.push('page=' + encodeURIComponent(page));
	
	if(params.length > 0) url += '?' + params.join('&');
	
	window.location.href = url;
}

// Handle real-time search
/*
let searchTimeout;
function handleSearch() {
	const searchInput = document.getElementById('searchInput');
	const searchValue = searchInput.value.trim();
	
	// Clear previous timeout
	clearTimeout(searchTimeout);
	
	// Set new timeout for search (debounce)
	searchTimeout = setTimeout(() => {
		const urlParams = new URLSearchParams(window.location.search);
		const contextPath = window.location.pathname.split('/')[1];
		const theloai = urlParams.get('theloai');
		const sort = urlParams.get('sort');
		const filterTK = urlParams.get('filterTK');
		const page = urlParams.get('page');
		
		let url = '/' + contextPath + '/TrangChuController';
		let params = [];
		
		if(theloai) params.push('theloai=' + encodeURIComponent(theloai));
		if(sort) params.push('sort=' + encodeURIComponent(sort));
		if(filterTK) params.push('filterTK=' + encodeURIComponent(filterTK));
		if(page) params.push('page=' + encodeURIComponent(page));
		if(searchValue) params.push('search=' + encodeURIComponent(searchValue));
		
		if(params.length > 0) url += '?' + params.join('&');
		
		window.location.href = url;
	}, 300); // Wait 300ms after user stops typing
}
*/

// Close modal on escape key
document.addEventListener('keydown', function(e) {
	if(e.key === 'Escape') {
		const modal = bootstrap.Modal.getInstance(document.getElementById('postDetailModal'));
		if(modal) modal.hide();
	}
});

----
Yêu cầu: Khi đang chờ xử lý của hàm enhancedSearch (Tìm kiếm bằng AI) thì hiện lên giao diện loading (Đang chờ xử lý) đẹp, nên áp dụng bootstrap hoặc các thư viện có sẵn khác, hoặc không, miễn là sao cho code đơn giản và ngắn nhất có thể.